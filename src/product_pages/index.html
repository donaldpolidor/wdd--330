<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sleep Outside | Product Details</title>
    <link rel="stylesheet" href="../css/style.css" />
  </head>

  <body>
    <header class="divider" id="main-header">
      <!-- The header will be loaded dynamically. -->
    </header>

    <main class="divider">
      <section class="product-detail">
        <h3 id="product-brand"></h3>
        <h2 class="divider" id="product-name"></h2>

        <img class="divider" id="product-image" src="" alt="Product image" />

        <p class="product-card__price" id="product-price"></p>
        <p class="product__color" id="product-color"></p>
        <p class="product__description" id="product-description"></p>

        <div class="product-detail__add">
          <button id="addToCart" class="add-to-cart">Add to Cart</button>
        </div>
      </section>
    </main>

    <footer id="main-footer">
      <!-- The footer will be loaded dynamically. -->
    </footer>

    <script type="module">
      import { getParam, loadHeaderFooter } from '../js/utils.mjs';
      import ProductData from '../js/ProductData.mjs';
      import ProductDetails from '../js/ProductDetails.mjs';

      //WAIT UNTIL HEADER AND FOOTER ARE LOADED
      await loadHeaderFooter();
      
      const productId = getParam("product");
      if (productId) {
        const dataSource = new ProductData();
        const productPage = new ProductDetails(productId, dataSource);
        productPage.init();
      } else {
        document.querySelector(".product-detail").innerHTML = `
          <div class="error">
            <h2>Error</h2>
            <p>Product not specified</p>
            <a href="../index.html">Back to home page</a>
          </div>
        `;
      }
    </script>
  </body>
</html>